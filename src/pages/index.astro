---
import { Image } from "astro:assets";
import Layout from "../layouts/Layout.astro";
import { postsService } from "@api/wordpress/services/posts";
const posts = await postsService.getRecent(10);
---

<Layout>
  <div>
    {
      posts.map((post) => (
        <article>
          <h2>
            <a href={`/blog/${post.slug}`}>{post.title.rendered}</a>
          </h2>
          <div set:html={post.excerpt.rendered} />
          {post._embedded?.["wp:featuredmedia"] && (
            <Image
              src={post._embedded?.["wp:featuredmedia"][0].source_url}
              alt={post._embedded?.["wp:featuredmedia"][0].alt_text}
              width={800}
              height={600}
            />
          )}
        </article>
      ))
    }
  </div>
</Layout>
